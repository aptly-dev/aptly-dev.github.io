<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>aptly - aptly publish repo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/favicon.ico">
    <link type="text/css" rel="stylesheet" href="/css/styles.css">
    <link rel="canonical" href="http://localhost:1313/doc/aptly/publish/repo">
    <link href="/post/index.xml" rel="alternate" type="application/rss+xml" title="Debian repository management tool" />
    
  </head>
  <body>
    <header id="page-header">
      <div class="container">
                <nav class="navbar navbar-default navbar-static-top" role="navigation">
          <ul class="nav navbar-nav nav-justified">
            <li ><a href="/examples/">examples</a></li>
            <li ><a href="/download/">download</a></li>
            <li ><a href="/support/">support</a></li>
            <li class="active"><a href="/doc/overview/">documentation</a></li>
            <li ><a href="/about/">about</a></li>
            <li ><a href="/post/">blog</a></li>
          </ul>
        </nav>

        <div class="row">
          <div class="col-md-6 col-md-offset-3 text-center">
            <a class="brand" href="/">
              <i class="brand-logo"></i>
              <span class="brand-name">aptly</span>
            </a>
          </div>
        </div>
      
      </div>
    </header>

    
    <section class="documentation">
      <div class="container">
        <div class="sidebar-overlay"></div>
        <div class="row">
          <div class="col-md-3 col-sm-3 col-xs-3">
            <div class="sidebar">
              <ul class="nav nav-sidebar">
                
                
                  <li >
                    <a href="http://localhost:1313/doc/overview">Overview</a>
                    
                  </li>
                
                  <li >
                    <a href="http://localhost:1313/doc/why">Why aptly?</a>
                    
                  </li>
                
                  <li >
                    <a href="http://localhost:1313/doc/faq">FAQ</a>
                    
                  </li>
                
                  <li >
                    <a href="http://localhost:1313/doc/features">Features</a>
                    
                      <ul class="nav">
                        
                          <li >
                            <a href="http://localhost:1313/doc/feature/query">Package Queries</a>
                            
                          </li>
                        
                          <li >
                            <a href="http://localhost:1313/doc/feature/duplicate">Duplicate Packages</a>
                            
                          </li>
                        
                          <li >
                            <a href="http://localhost:1313/doc/feature/s3">Publishing to S3</a>
                            
                          </li>
                        
                          <li >
                            <a href="http://localhost:1313/doc/feature/multi-component">Multi-Component Publishing</a>
                            
                          </li>
                        
                      </ul>
                    
                  </li>
                
                  <li >
                    <a href="http://localhost:1313/doc/configuration">Configuration</a>
                    
                  </li>
                
                  <li >
                    <a href="http://localhost:1313/doc/commands">Commands</a>
                    
                      <ul class="nav">
                        
                          <li >
                            <a href="http://localhost:1313/doc/aptly/flags">Global Flags</a>
                            
                          </li>
                        
                          <li >
                            <a href="http://localhost:1313/doc/aptly/mirror">aptly mirror</a>
                            
                              <ul class="nav">
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/mirror/create">aptly mirror create</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/mirror/update">aptly mirror update</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/mirror/list">aptly mirror list</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/mirror/show">aptly mirror show</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/mirror/edit">aptly mirror edit</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/mirror/search">aptly mirror search</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/mirror/rename">aptly mirror rename</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/mirror/drop">aptly mirror drop</a>
                                  </li>
                                
                              </ul>
                            
                          </li>
                        
                          <li >
                            <a href="http://localhost:1313/doc/aptly/repo">aptly repo</a>
                            
                              <ul class="nav">
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/create">aptly repo create</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/add">aptly repo add</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/import">aptly repo import</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/show">aptly repo show</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/list">aptly repo list</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/copy">aptly repo copy</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/move">aptly repo move</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/remove">aptly repo remove</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/search">aptly repo search</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/edit">aptly repo edit</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/rename">aptly repo rename</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/repo/drop">aptly repo drop</a>
                                  </li>
                                
                              </ul>
                            
                          </li>
                        
                          <li >
                            <a href="http://localhost:1313/doc/aptly/snapshot">aptly snapshot</a>
                            
                              <ul class="nav">
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/snapshot/create">aptly snapshot create</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/snapshot/list">aptly snapshot list</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/snapshot/show">aptly snapshot show</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/snapshot/verify">aptly snapshot verify</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/snapshot/pull">aptly snapshot pull</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/snapshot/filter">aptly snapshot filter</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/snapshot/diff">aptly snapshot diff</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/snapshot/merge">aptly snapshot merge</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/snapshot/search">aptly snapshot search</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/snapshot/rename">aptly snapshot rename</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/snapshot/drop">aptly snapshot drop</a>
                                  </li>
                                
                              </ul>
                            
                          </li>
                        
                          <li >
                            <a href="http://localhost:1313/doc/aptly/package">aptly package</a>
                            
                              <ul class="nav">
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/package/search">aptly package search</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/package/show">aptly package show</a>
                                  </li>
                                
                              </ul>
                            
                          </li>
                        
                          <li class="active">
                            <a href="http://localhost:1313/doc/aptly/publish">aptly publish</a>
                            
                              <ul class="nav">
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/publish/snapshot">aptly publish snapshot</a>
                                  </li>
                                
                                  <li class="active">
                                    <a href="http://localhost:1313/doc/aptly/publish/repo">aptly publish repo</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/publish/update">aptly publish update</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/publish/switch">aptly publish switch</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/publish/list">aptly publish list</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/publish/drop">aptly publish drop</a>
                                  </li>
                                
                              </ul>
                            
                          </li>
                        
                          <li >
                            <a href="http://localhost:1313/doc/aptly/db">aptly db</a>
                            
                              <ul class="nav">
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/db/cleanup">aptly db cleanup</a>
                                  </li>
                                
                                  <li >
                                    <a href="http://localhost:1313/doc/aptly/db/recover">aptly db recover</a>
                                  </li>
                                
                              </ul>
                            
                          </li>
                        
                          <li >
                            <a href="http://localhost:1313/doc/aptly/serve">aptly serve</a>
                            
                          </li>
                        
                          <li >
                            <a href="http://localhost:1313/doc/aptly/graph">aptly graph</a>
                            
                          </li>
                        
                      </ul>
                    
                  </li>
                
                  <li >
                    <a href="http://localhost:1313/doc/integrations">Integrations</a>
                    
                  </li>
                
                  <li >
                    <a href="http://localhost:1313/doc/history">History</a>
                    
                  </li>
                
              </ul>
              <div class="source-buttons">
                <a href="/download/" class="btn btn-danger">Download</a>
                <a href="https://github.com/smira/aptly" class="btn btn-default">Github</a>
              </div>
            </div>
          </div>
          <div class="col-md-9 col-sm-9 col-xs-9">
            

<h2 id="toc_0">aptly publish repo</h2>

<p>Publishes local repository directly, bypassing snapshot creation step.
Published repositories appear under <code>rootDir/public</code> directory. Valid
<a href="/doc/aptly/publish">GPG key</a> is required for publishing.</p>

<div class="alert alert-warning alert-note">It is not advised to publish local repositories directly unless
repository is used to host testing versions of packages that change
frequently. For production usage please <a href="/doc/aptly/snapshot/create/">create snapshot</a> from repository and
<a href="/doc/aptly/publish/snapshot/">publish it</a>.</div>

<p>Usage:</p>

<pre><code>$ aptly publish repo &lt;name&gt; [[&lt;endpoint:&gt;]&lt;prefix&gt;]
</code></pre>

<p>Params:</p>

<ul>
<li><code>name</code> is a local repo name that snould be published</li>
<li><code>endpoint</code> is an optional endpoint reference. Without endpoint,
repository would be pulished to local file system. In order to
publish to Amazon S3, use endpoint name <code>s3:&lt;name&gt;:</code>, where endpoint
<code>name</code> is configured as S3 publishing endpoint in
<a href="/doc/feature/s3">configuration file</a>.</li>
<li><code>prefix</code> is an optional prefix for publishing, if not specified,
repository would be published to the root of publiс directory.
<code>prefix</code> could be single directory like <code>ppa</code> or part of the tree
like <code>ppa/android</code>. <code>prefix</code> shouldn&rsquo;t contain <code>..</code>, and names
<code>dists</code> and <code>pool</code> are not accepted. Empty <code>prefix</code> would be
converted to <code>.</code>.</li>
</ul>

<p>Flags:</p>

<ul>
<li><code>-component=&quot;&quot;</code>: component name to publish; it is taken from local
repository default, otherwise it defaults to <code>main</code> (for
multi-component publishing, separate components with commas)</li>
<li><code>-distribution=&quot;&quot;</code>: distribution name to publish; guessed from local
repository default distribution</li>
<li><code>-force-overwrite=false</code>: overwrite packages files in the pool even
if content is different (see also <a href="/doc/feature/duplicate/">duplicate packages</a>)</li>
<li><code>-gpg-key=&quot;&quot;</code>: GPG key ID to use when signing the release, if not
specified default key is used</li>
<li><code>-keyring=&quot;&quot;</code>: GPG keyring to use (instead of default)</li>
<li><code>-label=&quot;&quot;</code>: value for <code>Label:</code> field</li>
<li><code>-origin=&quot;&quot;</code>: value for <code>Origin:</code> field</li>
<li><code>-passphrase=&quot;&quot;</code>: GPG passphrase to unlock private key (possibly insecure)</li>
<li><code>-passphrase-file=&quot;&quot;</code>: GPG passphrase file to unlock private key (possibly insecure)</li>
<li><code>-secret-keyring=&quot;&quot;</code>: GPG secret keyring to use (instead of default)</li>
<li><code>-skip-signing=false</code>: don&rsquo;t sign Release files with GPG</li>
</ul>

<p>If architectures are limited (with config <code>architectures</code> or option
<code>-architectures</code>), only mentioned architectures would be published,
otherwise <code>aptly</code> will publish all architectures in the snapshot.</p>

<p>It is not allowed to publish two repositories or snapshots to the same
<code>prefix</code> and <code>distribution</code>.</p>

<p>When local repository changes, published repository could be updated
in-place using command <a href="/doc/aptly/publish/update/">aptly publish update</a>.</p>

<p>Empty local repos could be published as well (as placeholder, for
subsequent updates using <a href="/doc/aptly/publish/update/">aptly publish update</a>
command). When publishing empty local repos it is important to specify
complete architectures list (using <code>-architectures</code> flag), as it can&rsquo;t
be changed after publishing.</p>

<p>Multiple component repositories should be published from several local
repositories, one repository per component. In that case, command
accepts several local repositories names:</p>

<pre><code>$ aptly publish repo -component=main,contrib mysoft-main mysoft-contrib
</code></pre>

<p>Please see <a href="/doc/feature/multi-component/">multiple-component publishing</a>
for more examples.</p>

<p>Example:</p>

<pre><code>$ aptly publish repo local-repo
Signing file '/var/aptly/public/dists/squeeze/Release' with gpg, please enter your passphrase when prompted:

&lt;&lt;gpg asks for passphrase&gt;&gt;

Clearsigning file '/var/aptly/public/dists/squeeze/Release' with gpg, please enter your passphrase when prompted:

&lt;&lt;gpg asks for passphrase&gt;&gt;

Snapshot back has been successfully published.
Please setup your webserver to serve directory '/var/aptly/public' with autoindexing.
Now you can add following line to apt sources:
  deb http://your-server/ squeeze main
Don't forget to add your GPG key to apt with apt-key.
</code></pre>

            <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'aptly';
    var disqus_title = 'aptly publish repo';
    var disqus_identifier = '\/doc\/aptly\/publish\/repo';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

          </div>
        </div>
      </div>
    </section>
    
    <footer id="page-footer">
      <div class="container">
                <nav class="navbar navbar-default navbar-static-top" role="navigation">
          <ul class="nav navbar-nav nav-justified">
            <li ><a href="/examples/">examples</a></li>
            <li ><a href="/download/">download</a></li>
            <li ><a href="/support/">support</a></li>
            <li class="active"><a href="/doc/overview/">documentation</a></li>
            <li ><a href="/about/">about</a></li>
            <li ><a href="/post/">blog</a></li>
          </ul>
        </nav>

        <div class="copy">
          Sponsored by <a href="http://express42.com/">express42</a> &copy;&nbsp;2013-2014 Andrey Smirnov
        </div>
      </div>
    </footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/aptly.js"></script>
    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-6065617-2', 'aptly.info');
    ga('send', 'pageview');

    </script>
  <script>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
